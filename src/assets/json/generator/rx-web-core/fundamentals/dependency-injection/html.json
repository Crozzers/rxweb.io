{"rightSidebarLinks":[{"id":"dependency-injection","title":"Dependency Injection","subLink":null},{"id":"dependencyinjection","title":"Dependency Injection","subLink":[{"title":"SingletonServices","id":"singletonservices","thirdLevelLink":[]},{"title":"ScopedServices","id":"scopedservices","thirdLevelLink":[]}]},{"id":"githubissues","title":"Dependency Injection Github Issues","subLink":null}],"title":"Dependency Injection","description":"","validatorType":"decorators","validationTypeTitle":"Decorators","type":"simple","gitDocPath":null,"category":"rxwebcore","subCategory":null,"linkTitle":"dependency-injection","tabArray":{},"innerHtml":null,"htmlContent":"<div class='row page-section' id= 'dependencyinjection'>\r\n<div class='col-lg-12'>\r\n<h2>Dependency Injection<a title='Link to this heading' class='link-header' href='/rxwebcore/dependency-injection#dependencyinjection'><i class='fa fa-link'></i></a></h2>\r\n\r\n<p class='showHideElement' >Dependency Injection is resolved when any object of a service is gained with the help of a constructor of the class where the gained service is assigned to a field which is created into the class and then after used into the class whenever the service is required.</p>\r\n<p class='showHideElement' >To achieve this principle the registration of this services during the start is done using the below two options:</p>\r\n<p class='showHideElement' >The services that are registered into the <span class='highlighted'>ConfigureServices</span> method of the startup.cs class contains two services used into the dependency injection.</p>\r\n<ul class=\"bullet-list\">\r\n  <li>SingletonService : <span class='highlighted'>services.AddSingletonService();</span></li> \r\n  <li>ScopedService : <span class='highlighted'>services.AddScopedService();</span></li>\r\n</ul>\r\n</div></div>\r\n<div class='row page-section' id= 'singletonservices'>\r\n<div class='col-lg-12'>\r\n<h2>SingletonServices<a title='Link to this heading' class='link-header' href='/rxwebcore/dependency-injection#singletonservices'><i class='fa fa-link'></i></a></h2>\r\n\r\n<p class='showHideElement' >Using <span class='highlighted'>AddSingleton</span> method creates a same instance of the services for all the requests, this instance is created when it is called for the first time and is used for lifetime. In our application it is mainly used for getting tenant database information and for retrieval of access permission of the user. It is added using an instance of  <span class='highlighted'>IServiceCollection</span> instance which we have discussed in the previous section.</p>\r\n<div class='model-ts'><pre><code>\r\npublic static class Singleton\r\n    {\r\n        public static void AddSingletonService(this IServiceCollection serviceCollection) {\r\n            serviceCollection.AddSingleton(typeof(TenantDbConnectionInfo));\r\n            serviceCollection.AddSingleton(typeof(UserAccessConfigInfo));\r\n        }\r\n    }\r\n</code></pre></div>\r\n<p class='showHideElement' >This class is created in the file named <span class='highlighted'>Singleton.cs</span> which is present in the bootstrap folder of the api folder. In the above code TenantDbConnectionInfo and UserAccessConfigInfo are classes which are used to retrieve information about their respective work area whenever the user logs in.</p>\r\n</div></div>\r\n<div class='row page-section' id= 'scopedservices'>\r\n<div class='col-lg-12'>\r\n<h2>ScopedServices<a title='Link to this heading' class='link-header' href='/rxwebcore/dependency-injection#scopedservices'><i class='fa fa-link'></i></a></h2>\r\n\r\n<p class='showHideElement' >using <span class='highlighted'>AddScoped</span> method creates a service instance based upon the client request. This instance is till the next request is made or in other words an instance is created for every individual client request. In our project, it is used for registering the ContextService(for bounded context and Uow) and DomainService(for domain classes)  whenever a new boundedContext is created, They are registered into this class </p>\r\n<blockquote class='showHideElement' ><p>The ContextService and DomainService  which are added in Singleton class are automatically added into it whenever bounded context is created using CLI command.</p></blockquote>\r\n<div class='model-ts'><pre><code>\r\n  public static class ScopedExtension\r\n    {\r\n        public static void AddScopedService(this IServiceCollection serviceCollection)\r\n        {\r\n            serviceCollection.AddScoped<IRepositoryProvider, RepositoryProvider>();\r\n            serviceCollection.AddScoped<ITokenAuthorizer, TokenAuthorizer>();\r\n            serviceCollection.AddScoped<ILocalizationInfo, LocalizationInfo>();\r\n            serviceCollection.AddScoped<IModelValidation, ModelValidation>();\r\n\t\t\tserviceCollection.AddScoped<IAuditLog, AuditLog>();\r\n\t\t\tserviceCollection.AddScoped<IApplicationTokenProvider, ApplicationTokenProvider>();\r\n            #region ContextService\r\n                        serviceCollection.AddScoped<ILoginContext, LoginContext>();\r\n            serviceCollection.AddScoped<ILoginUow, LoginUow>();\r\n            #endregion ContextService\r\n            #region DomainService\r\n            #endregion DomainService\r\n        }\r\n    }\r\n</code></pre></div>\r\n<p class='showHideElement' >The above class is created in the file named <span class='highlighted'>Scoped.cs</span> in the bootstrap folder of the Api project. </p>\r\n</div></div>\r\n<div class=\"row page-section\" id=\"githubissues\">\r\n<div class=\"col-lg-12\">\r\n<div component=\"app-github-issue\"></div>\r\n</div>\r\n</div>\r\n<div component=\"app-contribution\"></div>\r\n"}
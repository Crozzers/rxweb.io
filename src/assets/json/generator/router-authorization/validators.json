{"rightSidebarLinks":[{"id":"router-authorization","title":"router-authorization","subLink":null},{"id":"authorization","title":"Authorization","subLink":[]},{"id":"pagelevelauthorization","title":"Page Level Authorization","subLink":[]},{"id":"componentlevelauthorization","title":"Component Level Authorization","subLink":[]},{"id":"controllevelauthorization","title":"Control Level Authorization","subLink":[]}],"title":"Router authorization","description":"","validatorType":"validators","validationTypeTitle":"Validators","type":"simple","gitDocPath":"https://github.com/rxweb/rxweb.io/edit/master/docs/angular/routes/router-authorization.md","category":"router","subCategory":"","linkTitle":"router-authorization","tabArray":{},"innerHtml":null,"htmlContent":"<div class='row page-section' id= 'authorization'>\r\n<div class='col-lg-12'>\r\n<h2>Authorization<a title='Link to this heading' class='link-header' href='/router/router-authorization/validators#authorization'><i class='fa fa-link'></i></a></h2>\r\n\r\n<p class='showHideElement' >In every enterprise application there is a need of role based authorization to resolve the rights of the particular user to the application based upon the role after the user has logged in, lets consider a scenario where the application has a candidate module in the application having candidate form, A list to display the details of the candidate, a shared component which displays the skills of the candidate along with a button control to add and update skills, In this case the role based authorization should be done in such as way that the candidate page should be displayed to the role of the user depending upon the authorization level which will be divided into three categories :</p>\r\n<p class='showHideElement' >1) Page level authorization</p>\r\n<p class='showHideElement' >2) Component level authorization</p>\r\n<p class='showHideElement' >3) Control level authorization</p>\r\n<img style='height:500px;    width: 800px;' src='/assets/rxwebcore/Images/roles-snap2.png' alt='Role Based Authorization'>\r\n</div></div>\r\n<div class='row page-section' id= 'pagelevelauthorization'>\r\n<div class='col-lg-12'>\r\n<h2>Page Level Authorization<a title='Link to this heading' class='link-header' href='/router/router-authorization/validators#pagelevelauthorization'><i class='fa fa-link'></i></a></h2>\r\n\r\n<p class='showHideElement' >As mentioned in the above scenario, There is a candidate page which consists of a form which is displayed whenever the candidate module route is called after user logs in, In this case we will resolve the access towards the candidate page for the user whenever its route is called. The json schema which will be retrieved as per the case is as below :</p>\r\n<div component=\"app-code\" key=\"authorization-router-json\"></div> \r\n<p class='showHideElement' >In this json result, 1 is the Id of the application module along with the read, write, update and delete access to the user. </p>\r\n<blockquote class='showHideElement' ><p>This schema may differ from the application based upon the complexity and need</p></blockquote>\r\n<p class='showHideElement' >To achieve this we need to create a class named <span class='highlighted'>AuthorizationResolver</span> which implements the interface <span class='highlighted'>IAuthorize</span> to add the methods to resolve the user access object.</p>\r\n<p class='showHideElement' >Next we need to create a method <span class='highlighted'>authorize</span> which returns the user access from the server based upon the application module Id and the action type which is verified in the <span class='highlighted'>verifyAuthorization</span> method where the <span class='highlighted'>AuthorizeConfig</span> configuration's  access level is the module Id and action type(get, post). You need to write the business logic here based upon the schema here the data is retrieved from the user-access.json file. </p>\r\n<p class='showHideElement' >The Authentication Resolver class is as below : </p>\r\n<div component=\"app-code\" key=\"authorization-router-component\"></div> \r\n<p class='showHideElement' >Next in the component class we need to add the <span class='highlighted'>@access</span> decorator in which the application module id as the access level  and the action type as action as shown in the below component of candidate</p>\r\n<div component=\"app-code\" key=\"authorization-candidate-component\"></div> \r\n<p class='showHideElement' >The standard approach of angular uses the <span class='highlighted'>canActivate</span> gaurd to determine the accessibility according to the role after the route is called and this leads to creation of mutiple canActivate which is difficult to manage in large applications. But here we will manage this using a single <span class='highlighted'>BaseCanActivate</span> used thoroughly in the application using decorators in the component for component level authorization</p>\r\n<p class='showHideElement' >In the candidate routing file, we need to pass the <span class='highlighted'>BaseCanActivate</span> along with the route in canActivate parameter as shown here</p>\r\n<div component=\"app-code\" key=\"authorization-candidate-routing\"></div> \r\n<p class='showHideElement' >At the last we need to add the AuthorizationResolver class in the authorization parameter of <span class='highlighted'>@routerModule</span> decorator at the root level module to make it globally accessible </p>\r\n<div component=\"app-code\" key=\"authorization-router-model\"></div> \r\n<div class=\"stackbltiz-link\"> \r\n<a target=\"_blank\" class=\"redirect-link\" href=\"https://stackblitz.com/edit/router-authorization-e8dq1f?file=src/app/security/authorization-resolver.ts\">Stackblitz</a>\r\n</div>\r\n</div></div>\r\n<div class='row page-section' id= 'componentlevelauthorization'>\r\n<div class='col-lg-12'>\r\n<h2>Component Level Authorization<a title='Link to this heading' class='link-header' href='/router/router-authorization/validators#componentlevelauthorization'><i class='fa fa-link'></i></a></h2>\r\n\r\n<p class='showHideElement' >In every application there are shared component/smart component which are the sub module of the main module, for these shared components the access is further kept to another level where it is sub divided based upon the role, If we talk about the candidate page which has a list component which displays the data of the candidate which is the child module of candidate</p>\r\n<p class='showHideElement' >In this case we need to create a <span class='highlighted'>authorizeChildren</span> method in the same AuthorizationResolver class which we created earlier to resolve the user access object, this method is used to resolve the access of the child module.</p>\r\n<div component=\"app-code\" key=\"authorization-router-sharedcomponent\"></div> \r\n<p class='showHideElement' >Further <span class='highlighted'>@access</span> decorator will be added in the CandidateListComponent(shared module) in which the access level and the action type will be passed the same way as we had done in the page level component</p>\r\n<p class='showHideElement' >The CandidateListComponent is as below :</p>\r\n<div component=\"app-code\" key=\"authorization-router-candidatelistcomponent\"></div> \r\n<p class='showHideElement' >Add the  <span class='highlighted'>BaseCanActivate</span> Authgaurd in the routing file of the candidate module for CandidateList module</p>\r\n<div component=\"app-code\" key=\"authorization-router-candidatelistrouting\"></div> \r\n<div class=\"stackbltiz-link\"> \r\n<a target=\"_blank\" class=\"redirect-link\" href=\"https://stackblitz.com/edit/router-authorization-child-level-authorization?file=src/app/dashboard.component.html\">Stackblitz</a>\r\n</div>\r\n</div></div>\r\n<div class='row page-section' id= 'controllevelauthorization'>\r\n<div class='col-lg-12'>\r\n<h2>Control Level Authorization<a title='Link to this heading' class='link-header' href='/router/router-authorization/validators#controllevelauthorization'><i class='fa fa-link'></i></a></h2>\r\n\r\n<p class='showHideElement' >While performing some operations on a certain entity there are some controls which need to be restricted from certain users, For example in the skill entity of the candidate module there is a control of add in which based upon the plus icon click event the skill can be added, This control needs to be authorized based upon the user role.</p>\r\n<p class='showHideElement' >This can be done using <span class='highlighted'>*rxAuthorize</span> in which the add component will be passed as the parameter value as shown in this html code</p>\r\n<div component=\"app-code\" key=\"authorization-candidate-html\"></div> \r\n<p class='showHideElement' >The skillAdd is the property whose value will be assigned in the component as the SkillAddComponent, The authorization of the add button will be done based upon the access object retrieved from the skill add component.</p>\r\n<div component=\"app-code\" key=\"authorization-candidate-controlcomponent\"></div> \r\n<div class=\"stackbltiz-link\"> \r\n<a target=\"_blank\" class=\"redirect-link\" href=\"https://stackblitz.com/edit/router-authorization-control-level?file=src/app/candidate-list/candidate-list.component.ts\">Stackblitz</a>\r\n</div>\r\n</div></div>\r\n"}
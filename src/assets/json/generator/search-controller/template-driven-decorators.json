{"rightSidebarLinks":[{"id":"search-controller","title":"search-controller","subLink":null},{"id":"generateasearchcontroller","title":"Generate a Search Controller","subLink":[]},{"id":"methods","title":"Methods","subLink":[]},{"id":"example","title":"Example","subLink":[]},{"id":"seealso","title":"See Also","subLink":[]}],"title":"SearchController","description":"","validatorType":"template-driven","validationTypeTitle":"Template Driven Decorator","type":"simple","category":"rxwebcore","subCategory":null,"linkTitle":"searchcontroller","tabArray":{},"innerHtml":null,"htmlContent":"<p class='showHideElement' >Displaying list of the data tuples in the user interface requires a <span class='highlighted'>search</span> operation when there is large number of records retrieved.</p>\r\n<p class='showHideElement' >This involves faster search result fetching from the server which is a part of defining the application efficiency, This can be achieved by making a search controller, prior to it there must be a stored procedure which returns <span class='highlighted'>json</span> and passes to the client side without involving of the web server.</p>\r\n<p class='showHideElement' >The controller will have a predefined route which include the controller name. For example: <span class='highlighted'>[Route(\"api/UsersSearchController\")]</span> </p>\r\n<blockquote class='showHideElement' ><p>Name of that basic controller must have a suffix \"Controller\". For example: <span class='highlighted'>UsersSearchController</span>.</p></blockquote>\r\n<div class='row page-section' id= 'generateasearchcontroller'>\r\n<div class='col-lg-12'>\r\n<h2>Generate a Search Controller<a title='Link to this heading' class='link-header'  href='/rxwebcore/searchcontroller/decorators#generateasearchcontroller'><i class='fa fa-link'></i></a></h2>\r\n\r\n<p class='showHideElement' >To create a search controller, open the <span class='highlighted'>Package Manager Console</span> and run the following command.</p>\r\n<blockquote class='showHideElement' ><p>rxwebcore --controller --search --main &ltController_Name&gt --uow &ltModule_Name&gt --spname &ltName_of_stored_procedure&gt</p></blockquote>\r\n<p class='showHideElement' >Lets consider a scenario where you want to create a <span class='highlighted'>UsersSearchController</span> in the <span class='highlighted'>OrdersModule</span>, you have to write:</p>\r\n<blockquote class='showHideElement' ><p>rxwebcore --controller --search --main UsersSearch --uow User --spname\", \"spSearchUsers\"</p></blockquote>\r\n<p class='showHideElement' ><span class='highlighted'>UsersSearch</span> is the controller name and <span class='highlighted'>User</span> is the module name. It will create a controller <span class='highlighted'>UsersSearchController</span> in search folder of api in the project</p>\r\n</div></div>\r\n<div class='row page-section' id= 'methods'>\r\n<div class='col-lg-12'>\r\n<h2>Methods<a title='Link to this heading' class='link-header'  href='/rxwebcore/searchcontroller/decorators#methods'><i class='fa fa-link'></i></a></h2>\r\n\r\n<table class=\"table table-bordered\">\r\n<tr><th>Method</th><th>Return Type</th><th>Request Params</th><th>Request Body</th><th>Response</th></tr>\r\n<tr><td>Post</td><td>IActionResult</td><td> - </td><td>searchParams</td><td>search result</td></tr>\r\n</table>\r\n</div></div>\r\n<div class='row page-section' id= 'example'>\r\n<div class='col-lg-12'>\r\n<h2>Example<a title='Link to this heading' class='link-header'  href='/rxwebcore/searchcontroller/decorators#example'><i class='fa fa-link'></i></a></h2>\r\n\r\n<p class='showHideElement' >In this example  <span class='highlighted'>MainSqlDbContext</span> is the context of <span class='highlighted'>UsersModule</span> which contains the <span class='highlighted'>spSearchUsers</span></p>\r\n<p class='showHideElement' >which is executing while fetching the search result which are retrieved by passing searchParams as dictionary object in the post method.</p>\r\n<pre><code class='<span class='highlighted'>js'>\r\n    [ApiController]\r\n\t[Route(\"api/[controller]\")]\r\n    public class UsersSearchController : ControllerBase\r\n    {\r\n        private IDbContextManager<MainSqlDbContext> DbContextManager { get; set; }\r\n        public UsersSearchController(IDbContextManager<MainSqlDbContext> dbContextManager) {\r\n            DbContextManager = dbContextManager;\r\n        }\r\n        [HttpPost]\r\n        public async Task<IActionResult> Post([FromBody]Dictionary<string,string> searchParams)\r\n        {\r\n            var spParameters = new object[2];\r\n            spParameters[0] = new SqlParameter() { ParameterName = \"Query\", Value = searchParams[\"query\"] };\r\n            spParameters[1] = new SqlParameter() { ParameterName = \"UserId\", Value = UserClaim.UserId };\r\n            var result = await DbContextManager.SqlQueryAsync<StoreProcResult>(\"EXEC [dbo].spSearchUsers @Query, @UserId\", spParameters);\r\n            return Ok(result.SingleOrDefault()?.Result);\r\n        }\r\n    }\r\n</code></pre>\r\n</div></div>\r\n<div class='row page-section' id= 'seealso'>\r\n<div class='col-lg-12'>\r\n<h2>See Also<a title='Link to this heading' class='link-header'  href='/rxwebcore/searchcontroller/decorators#seealso'><i class='fa fa-link'></i></a></h2>\r\n\r\n<p class='showHideElement' >Security</p>\r\n</div></div>\r\n"}
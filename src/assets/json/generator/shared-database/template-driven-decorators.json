{"rightSidebarLinks":[{"id":"shared-database","title":"shared-database","subLink":null},{"id":"tenantbased","title":"Tenant Based","subLink":[]},{"id":"schemabased","title":"Schema Based","subLink":[]},{"id":"seealso","title":"See Also","subLink":[]}],"title":"Shared Database","description":"","validatorType":"template-driven","validationTypeTitle":"Template Driven Decorator","type":"simple","category":"working-with-data-model","subCategory":null,"linkTitle":"shareddatabase","tabArray":{},"innerHtml":null,"htmlContent":"<p class='showHideElement' >Multitenancy means multiple organization or client can use a single software. <span class='highlighted'>Multi Tenant</span> application means a software application which serves multiple clients from the same server. Here <span class='highlighted'>tenent</span> word represent the client. Tenant can be a single client or an organization. Each tenantâ€™s data is isolated and is not accessible to each other. Multi-tenancy is used while developing software that runs for different organizations.</p>\r\n<div class='row page-section' id= 'tenantbased'>\r\n<div class='col-lg-12'>\r\n<h2>Tenant Based<a title='Link to this heading' class='link-header'  href='/working-with-data-model/shareddatabase/decorators#tenantbased'><i class='fa fa-link'></i></a></h2>\r\n\r\n<p class='showHideElement' >Another approach for multi-tenancy is <span class='highlighted'>Shared Database</span> between all the tenants, that means we keep all the tenant's data in a single database. In that case operational cost reduces as it is in the same database and do not depend on the number of clients. Maintainability becomes quite easier as in this approach isolating data is the main case study we need to think about. </p>\r\n<p class='showHideElement' >In this situation, each tenant's data is in the same tables. To isolate tenant's data we can add a discriminator column (for example: you can take <span class='highlighted'>ClientId</span>) to respective table.</p>\r\n<p class='showHideElement' >Lets consider a scenario in which the existing application does not serve multiple clients and now application has to work for multiple manpower companies in which there is a candidate form which should be accessed by different organizations. Let's see how it will be implemented based upon the organization. In this case the CLI command will add <span class='highlighted'>[TenantFilterQuery]</span> above the clientId and client wise data serving data will be handled by it. </p>\r\n<p class='showHideElement' >There are two tables in the database Client and Candidate. </p>\r\n<p class='showHideElement' >Here is the Clients table</p>\r\n<table class=\"table table-bordered\">\r\n<tr><th>ClientId</th><th>ClientName</th></tr>\r\n<tr><td>1</td><td>IBM</td></tr>\r\n<tr><td>2</td><td>Oracle</td></tr>\r\n</table>\r\n<p class='showHideElement' >Here is the Candidates table.</p>\r\n<table class=\"table table-bordered\">\r\n<tr><th>CandidateId</th><th>ClientId</th><th>CandidateName</th></tr>\r\n<tr><td>1</td><td>1</td><td>John</td></tr>\r\n<tr><td>2</td><td>1</td><td>Maria</td></tr>\r\n<tr><td>3</td><td>2</td><td>Tony</td></tr>\r\n<tr><td>4</td><td>2</td><td>Steve</td></tr>\r\n</table>\r\n<p class='showHideElement' >Coming to the project, the <span class='highlighted'>ClientId</span> is to be configured in the <span class='highlighted'>appsettings.json</span> where <span class='highlighted'>TenantColumnName</span> is the key Name and <span class='highlighted'>ClientId</span> is the value.</p>\r\n<p class='showHideElement' >After that you need to run the CLI command to add models which will add the <span class='highlighted'>[TenantFilterQuery]</span> annotation above the ClientId property. Further we need to generate a JWT web joken based upon the TenantId in the <span class='highlighted'>GetTokenAsync</span> method of <span class='highlighted'>ApplicationTokenProvider.cs</span> which is located in the security folder of <span class='highlighted'>HumanResourceApplication.Infrastructure</span>.</p>\r\n<pre><code class='<span class='highlighted'>js'>\r\nnew Claim(CustomClaimTypes.TenantId,1.ToString())\r\n</code></pre>\r\n<p class='showHideElement' >Once the token is generated based upon the provided TenantId and the candidates operations will be done based upon the candidate.</p>\r\n</div></div>\r\n<div class='row page-section' id= 'schemabased'>\r\n<div class='col-lg-12'>\r\n<h2>Schema Based<a title='Link to this heading' class='link-header'  href='/working-with-data-model/shareddatabase/decorators#schemabased'><i class='fa fa-link'></i></a></h2>\r\n\r\n<p class='showHideElement' >Coming Soon..</p>\r\n</div></div>\r\n<div class='row page-section' id= 'seealso'>\r\n<div class='col-lg-12'>\r\n<h2>See Also<a title='Link to this heading' class='link-header'  href='/working-with-data-model/shareddatabase/decorators#seealso'><i class='fa fa-link'></i></a></h2>\r\n\r\n</div></div>\r\n"}
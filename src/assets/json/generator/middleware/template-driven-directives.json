{"rightSidebarLinks":[{"id":"middleware","title":"middleware","subLink":null},{"id":"middleware","title":"Middleware","subLink":[]},{"id":"global","title":"Global","subLink":[]},{"id":"componentbased","title":"Component Based","subLink":[]}],"title":"middleware","description":"","validatorType":"template-driven","validationTypeTitle":"Template Driven","type":"simple","gitDocPath":"https://github.com/rxweb/rxweb.io/edit/master/docs/angular/routes/middleware.md","category":"router","subCategory":null,"linkTitle":"middleware","tabArray":{},"innerHtml":null,"htmlContent":"<div class='row page-section' id= 'middleware'>\r\n<div class='col-lg-12'>\r\n<h2>Middleware<a title='Link to this heading' class='link-header' href='/router/middleware/template-driven/directives#middleware'><i class='fa fa-link'></i></a></h2>\r\n\r\n<p class='showHideElement' >Middlewares are constructed for the purpose to invoke an action to perform some task whenever any request is made to a specific route, pre-route navigation tasks can be invoked to perform communication and data management. Using @rxweb/angular-router it can be managed in these two different ways:</p>\r\n</div></div>\r\n<div class='row page-section' id= 'global'>\r\n<div class='col-lg-12'>\r\n<h2>Global<a title='Link to this heading' class='link-header' href='/router/middleware/template-driven/directives#global'><i class='fa fa-link'></i></a></h2>\r\n\r\n<p class='showHideElement' >Global middleware are used for invoking an action pre-route navigation whenever the particular route is called throughout the application. </p>\r\n<p class='showHideElement' >This usage is explained using a case where the configuration of the application is resolved using the global middleware in which the configuration of the application from a configuration json stored in the assets of the application, These configuration store the keys like default language, change detection, default theme, cache keys etc.. which are resolved in a centralized manner.</p>\r\n<p class='showHideElement' >Lets begin by creating a class <span class='highlighted'>ConfigurationResolver</span> which implements <span class='highlighted'>IMiddleware</span> interface to use the invoke method to resolve the configuration.</p>\r\n<div component=\"app-code\" key=\"middleware-router-model\"></div> \r\n<p class='showHideElement' >Whenever the <span class='highlighted'>invoke</span> method will be called it will resolve the configuration data and provide it to the component and to make it accessible globally it will be declared in the @routerModule decorator along with the middleware parameter </p>\r\n<div component=\"app-code\" key=\"middleware-router-component\"></div> \r\n<div class=\"stackbltiz-link\"> \r\n<a target=\"_blank\" class=\"redirect-link\" href=\"https://stackblitz.com/edit/router-global-middleware-xwaxtb?file=src/app/security/middlewares/configuration-resolver.ts\">Stackblitz</a>\r\n</div>\r\n</div></div>\r\n<div class='row page-section' id= 'componentbased'>\r\n<div class='col-lg-12'>\r\n<h2>Component Based<a title='Link to this heading' class='link-header' href='/router/middleware/template-driven/directives#componentbased'><i class='fa fa-link'></i></a></h2>\r\n\r\n<p class='showHideElement' >For executing any action for an individual component based upon the data involved, it is specified in the <span class='highlighted'>@middleware</span> decorator which is placed before the component class where it needs to be invoked.</p>\r\n<p class='showHideElement' >Lets illustrate this by considering a scenario in which the login middleware is called which checks the authentication object in the local storage, based upon which it which check whether the user is logged in or not, If the auth token is not found it will remain on the login page else it will navigate to the mentioned component page</p>\r\n<p class='showHideElement' >The login middleware class with some custom business logic is as below</p>\r\n<div component=\"app-code\" key=\"middleware-complete-component\"></div> \r\n<p class='showHideElement' >The second step is to pass the <span class='highlighted'>@middleware</span> decorator into the component as below </p>\r\n<div component=\"app-code\" key=\"middleware-complete-model\"></div> \r\n<p class='showHideElement' >Thats it see the working example :</p>\r\n<div class=\"stackbltiz-link\"> \r\n<a target=\"_blank\" class=\"redirect-link\" href=\"https://stackblitz.com/edit/router-global-middleware-qebfse?file=src/app/security/middlewares/logged-in-middleware.ts\">Stackblitz</a>\r\n</div>\r\n</div></div>\r\n"}
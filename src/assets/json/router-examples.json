[{
    "isRouterDoc":true,
        "link": "https://stackblitz.com/edit/router-authorization?file=src/app/app.component.ts",
        "content": "import { Injectable } from '@angular\/core';\r\nimport { IAuthorize, AuthorizeConfig } from '@rxweb\/angular-router';\r\nimport { Router, ActivatedRouteSnapshot } from '@angular\/router';\r\nimport { RxHttp } from '@rxweb\/http';\r\nimport { resolve } from 'dns';\r\n\r\nexport var dbAccessModule : any ;\r\n\r\n@Injectable({\r\n    providedIn: 'root',\r\n})\r\nexport class AuthorizationResolver implements IAuthorize {\r\n\r\n    constructor(private http: RxHttp, private router: Router) { }\r\n\r\n    authorize(authorizeConfig: AuthorizeConfig, route: ActivatedRouteSnapshot): Promise<boolean> | boolean {\r\n   \r\n       \r\n        var promise = new Promise<boolean>((resolve, reject) => {\r\n            var t = this;\r\n             \r\n            if (dbAccessModule == undefined || dbAccessModule == null) {\r\n                this.http.get<string>({ path: \"api\/Authorize\/access\", }).subscribe(response => {\r\n                    dbAccessModule = JSON.parse(response);\r\n                    \r\n                    \/\/resolve(dbAccessModule);\r\n                    let isAccess = this.verifyAuthorization(authorizeConfig);                    \r\n                    resolve(isAccess);\r\n                    if(!isAccess)\r\n                        this.router.navigate([\"\/dashboard\"])\r\n                })\r\n            }\r\n            else{\r\n                let isAccess = this.verifyAuthorization(authorizeConfig);\r\n                resolve(isAccess);\r\n                if(!isAccess)\r\n                        this.router.navigate([\"\/dashboard\"])\r\n            }\r\n        })\r\n        return promise;\r\n    }\r\n\r\n    verifyAuthorization(authorizeConfig: AuthorizeConfig): boolean{\r\n        return dbAccessModule[authorizeConfig.accessLevel][authorizeConfig.action]\r\n    }\r\n\r\n    authorizeChildren(authorizeConfig: AuthorizeConfig, pageAuthorizeConfig: AuthorizeConfig) {\r\n        \r\n        if (dbAccessModule === undefined || dbAccessModule == null) {\r\n            const promise = new Promise<boolean>((resolve, reject) => {\r\n                this.http.get<string>({ path: 'api\/Authorize\/access' }).subscribe(response => {\r\n                    dbAccessModule = JSON.parse(response);\r\n                    const result = this.verifyAuthorization(authorizeConfig);\r\n                    resolve(result);\r\n                });\r\n            });\r\n            return promise;\r\n        } else {\r\n            return this.verifyAuthorization(authorizeConfig);\r\n        }\r\n\r\n    }\r\n\r\n    clearPermissions() {\r\n        dbAccessModule = null;\r\n    }\r\n}\r\n"
    }
]